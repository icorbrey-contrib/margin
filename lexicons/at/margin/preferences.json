{
  "lexicon": 1,
  "id": "at.margin.preferences",
  "defs": {
    "main": {
      "type": "record",
      "description": "User preferences for the Margin application.",
      "key": "literal:self",
      "record": {
        "type": "object",
        "required": ["createdAt"],
        "properties": {
          "externalLinkSkippedHostnames": {
            "type": "array",
            "description": "List of hostnames to skip the external link warning modal for.",
            "items": {
              "type": "string",
              "maxLength": 255
            },
            "maxLength": 100
          },
          "subscribedLabelers": {
            "type": "array",
            "description": "List of labeler services the user subscribes to for content moderation.",
            "items": {
              "type": "ref",
              "ref": "#labelerSubscription"
            },
            "maxLength": 50
          },
          "labelPreferences": {
            "type": "array",
            "description": "Per-label visibility preferences for subscribed labelers.",
            "items": {
              "type": "ref",
              "ref": "#labelPreference"
            },
            "maxLength": 500
          },
          "createdAt": {
            "type": "string",
            "format": "datetime"
          },
          "disableExternalLinkWarning": {
            "type": "boolean",
            "description": "If true, do not show the confirmation modal when opening external links."
          }
        }
      }
    },
    "labelerSubscription": {
      "type": "object",
      "required": ["did"],
      "properties": {
        "did": {
          "type": "string",
          "description": "DID of the labeler service."
        }
      }
    },
    "labelPreference": {
      "type": "object",
      "required": ["labelerDid", "label", "visibility"],
      "properties": {
        "labelerDid": {
          "type": "string",
          "description": "DID of the labeler service."
        },
        "label": {
          "type": "string",
          "description": "The label identifier (e.g. sexual, violence, spam)."
        },
        "visibility": {
          "type": "string",
          "description": "How to handle content with this label: hide, warn, or ignore.",
          "knownValues": ["hide", "warn", "ignore"]
        }
      }
    }
  }
}
